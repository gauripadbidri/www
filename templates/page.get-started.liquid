<style>
/* CAROUSAL flickity.css */

.carousel-cell {
  width: 100%;
  margin-right: 10px;
  border-radius: 5px;
}
.get-started-carousel .grid-cell-padding{
    padding-left: 0;
}
</style>
<div class="page-width">
  <div class="grid">
      <div class="grid__item medium-up--five-sixths medium-up--push-one-twelfth">
          <!-- Flickity HTML init -->
          
          {% section 'back-carousal' %}
          <div class="carousel get-started-carousel">
              <div class="grid-cell-padding Grid__Cell 1/1--phone 1/1--tablet 1/1--lap-and-up">
                {% section 'image-overlay' %}
                {% section 'product-kit-collection' %}
                
            </div>
              <div class="grid-cell-padding Grid__Cell 1/1--phone 1/1--tablet 1/1--lap-and-up">{% section 'step-one' %}</div>
              <div class="grid-cell-padding Grid__Cell 1/1--phone 1/1--tablet 1/1--lap-and-up">{% section 'step-two' %}</div>
              <div class="grid-cell-padding Grid__Cell 1/1--phone 1/1--tablet 1/1--lap-and-up">{% section 'step-three' %}</div>
          </div>
      </div>
  </div>
  {%section 'modal' %}
</div>



<script>
  $(function() {
      var maxSlides = 3;
      var userSelectedSlide = 0;
      var currentSlideSelected = userSelectedSlide;
      var userOptions = {
          currentSlideSelected : userSelectedSlide,
          hygeineType : 0,
          addons:[],
      };
      var addonProduct = {
          name:'',
          id:'',
          quantity: '',
          addType: '' // Subscription or One Time
      };

      var sliderIndex = userSelectedSlide - 1; // It is always current Slide number - 1 -> just like array index
      // Dont show Prev - Next on STEP 0 and STEP 3 i.e. Cart Page as we have everything to edit there.
      if(userSelectedSlide < 1 || userSelectedSlide >= 3){
          $("#go-previous-step").css ('display', 'none');
          $("#go-next-step").css ('display', 'none');
      }

      $("#go-previous-step").on('click', function(){
        currentSlideSelected = currentSlideSelected - 1;
          if(currentSlideSelected <= 1 || currentSlideSelected >= 3){
              $("#go-previous-step").css ('display', 'none');
          } else {
            $("#go-previous-step").css ('display', 'block');
            $("#go-next-step").css ('display', 'block');
          }
          $carousel.flickity('previous', false, false);
      });

      $("#go-next-step").on('click', function(){
        currentSlideSelected = currentSlideSelected + 1;
          if(currentSlideSelected <= 1 || currentSlideSelected >= 3){
            if (currentSlideSelected == 3) {
                $("#go-previous-step").css ('display', 'block');                
            } else {
                $("#go-previous-step").css ('display', 'none');
            }            
            $("#go-next-step").css ('display', 'none');
          } else {
            $("#go-previous-step").css ('display', 'block');
            $("#go-next-step").css ('display', 'block');
          }
          $carousel.flickity('next', false, false);
      });

      var $carousel = $('.get-started-carousel').flickity({
          'prevNextButtons': false,
          'pageDots': false,
          'select': sliderIndex,
          draggable: false,
          fade: true,
          adaptiveHeight: true
      });

     $('input[name=step-one-hygeine]').on('change', function() {debugger;
          userOptions['hygeineType'] = $(this).val();
          currentSlideSelected = currentSlideSelected + 1;
          $carousel.flickity('next', false, false);
          $("#go-previous-step").css ('display', 'block');
          $("#go-next-step").css ('display', 'block');
      });

      $('#btn_email_to_shopifyregister_and_newsletter').click(function() {
        currentSlideSelected = currentSlideSelected + 1;
          $carousel.flickity('next', false, false);
          return false;
      });

      $('#skipStep2').click(function (){
        currentSlideSelected = currentSlideSelected + 1;
        if(currentSlideSelected <= 1 || currentSlideSelected >= 3) {
            if (currentSlideSelected == 3){
            $("#go-previous-step").css ('display', 'block');            
        } else {
            $("#go-previous-step").css ('display', 'none');
        }
            $("#go-next-step").css ('display', 'none');
        } 
        
          $carousel.flickity('next', false, false);
          return false;
      });
  });
</script>
    