<section class="Section {% unless section.settings.image %}Section--spacingNormal{% endunless %}" style="background-color:{{ section.settings.background_color }};">
    {%- capture section_title -%}
        <div class="title-container">
            <div class="FeatureText__Content">
                {%- if section.settings.subheading != blank or section.settings.title != blank -%}
                    <header class="SectionHeader">
                        {%- if section.settings.title != blank -%}
                            <h2 class="SectionHeader__Heading Heading u-h1" style="color: {{ section.settings.text_color }};">{{
                    section.settings.title | escape }}</h2>
                        {%- endif -%}

                        {%- if section.settings.subheading != blank -%}
                            <h3 class="SectionHeader__SubHeading Heading u-h6" style="color: {{ section.settings.text_color }};">{{
                    section.settings.subheading | escape }}</h3>
                        {%- endif -%}
                    </header>
                {%- endif -%}
            </div>
        </div>
    {%- endcapture -%}

    {%- capture section_content_left -%}
        {%- if section.settings.content_lt != blank -%}
            <div class="SectionHeader__Description Rte content-lt" style="color: {{ section.settings.text_color }};">
                {{ section.settings.content_lt }}
            </div>
        {%- endif -%}

        {%- if section.settings.image_l != blank -%}
            <div class="images image-l">
                {%- include 'image-size', sizes: '400,600,700,800,900,1000,1200', image: section.settings.image_l -%}

                <div class="AspectRatio" style="max-width: {{ section.settings.image_l.width }}px; --aspect-ratio: {{ section.settings.image_l.aspect_ratio }}">
                    {%- assign image_url = section.settings.image_l | img_url: '1x1' | replace: '_1x1.', '_{width}x.'
            -%}
                    <img class="Image--lazyLoad Image--slide{{ section.settings.image_l_position | capitalize }}" data-src="{{ image_url }}" data-expand="-200" data-widths="[{{ supported_sizes }}]" data-sizes="auto" alt="{{ section.settings.image_l.alt | escape }}">

                        <noscript>
                            <img src="{{ section.settings.image_l | img_url: '800x' }}" alt="{{ section.settings.image_l.alt | escape }}"></noscript>
                        </div>
                    </div>
                {%- endif -%}

                {%- if section.settings.content_lb != blank -%}
                    <div class="SectionHeader__Description Rte content-lb" style="color: {{ section.settings.text_color }};">
                        {{ section.settings.content_lb }}
                    </div>
                {%- endif -%}
            {%- endcapture -%}

            {%- capture section_content_right -%}
                {%- if section.settings.content_rt != blank -%}
                    <div class="SectionHeader__Description Rte content-rt" style="color: {{ section.settings.text_color }};">
                        {{ section.settings.content_rt }}
                    </div>
                {%- endif -%}

                {%- if section.settings.image_r != blank -%}
                    <div class="images image-r">
                        {%- include 'image-size', sizes: '400,600,700,800,900,1000,1200', image: section.settings.image_r -%}

                        <div class="AspectRatio" style="max-width: {{ section.settings.image_r.width }}px; --aspect-ratio: {{ section.settings.image_r.aspect_ratio }}">
                            {%- assign image_url = section.settings.image_r | img_url: '1x1' | replace: '_1x1.', '_{width}x.'
            -%}
                            <img class="Image--lazyLoad Image--slide{{ section.settings.image_r_position | capitalize }}" data-src="{{ image_url }}" data-expand="-200" data-widths="[{{ supported_sizes }}]" data-sizes="auto" alt="{{ section.settings.image_r.alt | escape }}">

                                <noscript>
                                    <img src="{{ section.settings.image_r | img_url: '800x' }}" alt="{{ section.settings.image_r.alt | escape }}"></noscript>
                                </div>
                            </div>
                        {%- endif -%}

                        {%- if section.settings.content_rb != blank -%}
                            <div class="SectionHeader__Description Rte content-rb" style="color: {{ section.settings.text_color }};">
                                {{ section.settings.content_rb }}
                            </div>
                        {%- endif -%}
                    {%- endcapture -%}

                    {%- capture section_button -%}
                        {%- if section.settings.link_text != blank -%}
                            <div class="button-container">
                                {%- if section.settings.link_text != blank -%}
                                    <a href="{{ section.settings.link_url }}" class="Button Button--primary" style="background-color: {{ section.settings.color_button }}; color: {{ section.settings.color_link }};">{{ section.settings.link_text | escape
            }}</a>
                                {%- endif -%}
                            </div>
                        {%- endif -%}
                    {%- endcapture -%}

                    <div class="text-image-text grid two-columns Container">
                        {{- section_title -}}
                        {{- section_content_left -}}
                        {{- section_content_right -}}
                        {{- section_button -}}
                    </div>
                </section>

                {% schema %}

{
    "name": "Rich text with image",
    "class": "shopify-section--bordered",
    "settings": [
        {
            "type": "text",
            "id": "title",
            "label": "Heading",
            "default": "Title"
        }, {
            "type": "text",
            "id": "subheading",
            "label": "Sub-heading",
            "default": "Sub-heading"
        }, {
            "type": "color",
            "id": "text_color",
            "label": "Text Color",
            "default": "#FFF"
        }, {
            "type": "color",
            "id": "background_color",
            "label": "Background Color",
            "default": "#FF40B4"
        }, {
            "type": "richtext",
            "id": "content_lt",
            "label": "Text Top Left",
            "default": "<p>Add your own custom content to give more information about your store, availability details...</p>"
        }, {
            "type": "image_picker",
            "id": "image_l",
            "label": "Image",
            "info": "1200 x 1200px png recommended"
        }, {
            "type": "richtext",
            "id": "content_lb",
            "label": "Text Bottom Left",
            "default": "<p>Add your own custom content to give more information about your store, availability details...</p>"
        }, {
            "type": "richtext",
            "id": "content_rt",
            "label": "Text Top Right",
            "default": "<p>Add your own custom content to give more information about your store, availability details...</p>"
        }, {
            "type": "image_picker",
            "id": "image_r",
            "label": "Image",
            "info": "1200 x 1200px png recommended"
        }, {
            "type": "richtext",
            "id": "content_rb",
            "label": "Text Bottom Right",
            "default": "<p>Add your own custom content to give more information about your store, availability details...</p>"
        }, {
            "type": "text",
            "id": "link_text",
            "label": "Link text"
        }, {
            "type": "url",
            "id": "link_url",
            "label": "Link URL"
        }, {
            "type": "color",
            "id": "color_link",
            "label": "Link Color",
            "default": "#000000"
        }, {
            "type": "color",
            "id": "color_button",
            "label": "Button Color",
            "default": "#ffffff"
        }
    ],
    "presets": [
        {
            "category": "Text",
            "name": "Double | Text | Image | Text",
            "settings": {}
        }
    ]
}

{% endschema %}